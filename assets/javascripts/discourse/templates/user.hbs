<div class="alert alert-info"><strong>Profiles are being redesigned!</strong> The default discourse implementation is ugly and hard to work with so I'm just gonna do a bunch of it from scratch. Sorry for the inconvenience if things shift around until then.<br>- Dak</div>
<div class="container {{if viewingSelf 'viewing-self'}}">
  {{#d-section class="user-main"}}

    <section class="custom-profile-header">
      <div class="avatar-container">
        <div class='user-profile-avatar'>
          {{bound-avatar model "huge"}}
          {{#if model.primary_group_name}}
              {{avatar-flair
                flairURL=model.primary_group_flair_url
                flairBgColor=model.primary_group_flair_bg_color
                flairColor=model.primary_group_flair_color
                groupName=model.primary_group_name}}
          {{/if}}
          {{plugin-outlet name="user-profile-avatar-flair" args=(hash model=model) tagName='div'}}
        </div>
      </div>
      <div class="details-container">
        <h1 class="x{{if nameFirst "full-name" "username"}}">{{if nameFirst model.name (format-username model.username)}} {{user-status model currentUser=currentUser}}</h1>
        <h2 class="{{if nameFirst "username" "full-name"}}">{{#if nameFirst}}{{model.username}}{{else}}{{model.name}}{{/if}}</h2>
        <div class='bio'>
          {{#if model.isSuspended}}
            <div class='suspended'>
              {{d-icon "ban"}}
              <b>
                {{#if model.suspendedForever}}
                  {{i18n 'user.suspended_permanently'}}
                {{else}}
                  {{i18n 'user.suspended_notice' date=model.suspendedTillDate}}
                {{/if}}
              </b><br>
              {{#if model.suspend_reason}}
                <b>{{i18n 'user.suspended_reason'}}</b> {{model.suspend_reason}}
              {{/if}}
            </div>
          {{/if}}
          {{#if isNotSuspendedOrIsStaff}}
            {{{model.bio_cooked}}}
          {{/if}}
        </div>
      </div>
    </section>

    <section class="staff-stickers">
      {{#each model.displayGroups as |group|}}
        {{#if group.flair_bg_color}}
          <span class="profile-staff-sticker" style="background-color: #{{group.flair_bg_color}}; color: #{{group.flair_color}};">
            {{#link-to 'group' group.name class="group-link"}}{{group.full_name}}{{/link-to}}
          </span>
        {{/if}}
      {{/each}}
    </section>

    {{#mobile-nav class='main-nav' desktopClass="nav nav-pills user-nav" currentPath=currentPath}}
      <li>{{#link-to 'user.summary'}}{{i18n 'user.summary.title'}}{{/link-to}}</li>
      <li>{{#link-to 'userActivity'}}{{i18n 'user.activity_stream'}}{{/link-to}}</li>
      {{#if showNotificationsTab}}
        <li>
          {{#link-to 'userNotifications'}}
            {{d-icon "comment" class="glyph"}}{{i18n 'user.notifications'}}
          {{/link-to}}
        </li>
      {{/if}}
      {{#if showPrivateMessages}}
        <li>{{#link-to 'userPrivateMessages'}}{{d-icon "envelope-o"}}{{i18n 'user.private_messages'}}{{/link-to}}</li>
      {{/if}}
      {{#if canInviteToForum}}
        <li>{{#link-to 'userInvited'}}{{d-icon "user-plus"}}{{i18n 'user.invited.title'}}{{/link-to}}</li>
      {{/if}}
      {{#if showBadges}}
        <li>{{#link-to 'user.badges'}}{{d-icon "certificate"}}{{i18n 'badges.title'}}{{/link-to}}</li>
      {{/if}}
      {{plugin-outlet name="user-main-nav" tagName='' connectorTagName='li' args=(hash model=model)}}
      {{#if model.can_edit}}
        <li>{{#link-to 'preferences'}}{{d-icon "cog"}}{{i18n 'user.preferences'}}{{/link-to}}</li>
      {{/if}}
    {{/mobile-nav}}

    <div class='user-table'>
      <div class='wrapper'>
        {{outlet}}
      </div>
    </div>

  {{/d-section}}
</div>